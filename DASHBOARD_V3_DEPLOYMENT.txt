DASHBOARD V3 - DEPLOYMENT COMPLETE ‚úÖ
====================================

üì¶ WHAT'S BEEN DEPLOYED:

1. Google Apps Script (via clasp):
   ‚úÖ Charts.js - All 7 chart builders:
      ‚Ä¢ buildPricesChart() - System prices (SSP/SBP/Mid)
      ‚Ä¢ buildDemandGenChart() - Demand vs Generation
      ‚Ä¢ buildICChart() - Interconnector flows
      ‚Ä¢ buildBMChart() - BM costs breakdown
      ‚Ä¢ buildWindPerfChart() - Wind forecast vs actual
      ‚Ä¢ buildFrequencyChart() - System frequency
      ‚Ä¢ buildOutagesChart() - Generator outages by fuel
   
   ‚úÖ Code.js - Dashboard functions:
      ‚Ä¢ RefreshDashboard() - Reads 5 filters, updates timestamp
      ‚Ä¢ formatDashboard() - Applies consistent styling
      ‚Ä¢ Existing constraint map functions

2. Python Data Pipeline:
   ‚úÖ update_wind_data.py - Populates Chart_Wind_Perf (2 hours of data)
   ‚úÖ update_frequency.py - Populates Chart_Frequency (1440 minutes/24h)
   ‚úÖ update_bm_costs.py - Template ready (no recent data in BigQuery)
   ‚úÖ update_outages.py - Works with bmrs_remit_unavailability
   ‚úÖ update_all_charts.sh - Master script to run all updates

üìä GOOGLE SHEETS SETUP:

Spreadsheet ID: 1LmMq4OEE639Y-XXpOJ3xnvpAmHB6vUovh5g6gaU_vzc

Required Sheets:
‚Ä¢ Dashboard (main sheet with filters, KPIs, tables, charts)
‚Ä¢ Chart_Prices (for prices chart)
‚Ä¢ Chart_Demand_Gen (for demand/generation chart)
‚Ä¢ Chart_IC_Import (for IC flows chart)
‚Ä¢ Chart_BM_Costs (for BM costs chart)
‚Ä¢ Chart_Wind_Perf (‚úÖ populated by update_wind_data.py)
‚Ä¢ Chart_Frequency (‚úÖ populated by update_frequency.py)
‚Ä¢ Chart_Outages (needs to be created or use existing Outages sheet)

üöÄ HOW TO USE:

1. Update Data (run every 5 minutes via cron):
   cd /Users/georgemajor/GB-Power-Market-JJ
   ./update_all_charts.sh

2. Rebuild Charts (run from Google Sheets Apps Script):
   ‚Ä¢ Extensions ‚Üí Apps Script
   ‚Ä¢ Run: buildAllCharts()

3. Apply Formatting (run once or after major changes):
   ‚Ä¢ Extensions ‚Üí Apps Script
   ‚Ä¢ Run: formatDashboard()

4. Refresh Dashboard (connect "Refresh Dashboard" button):
   ‚Ä¢ Right-click button in Dashboard sheet
   ‚Ä¢ Assign script ‚Üí RefreshDashboard
   ‚Ä¢ Click button to read filters and update timestamp

‚è∞ AUTOMATION SETUP:

Cron (every 5 minutes):
   */5 * * * * cd /Users/georgemajor/GB-Power-Market-JJ && ./update_all_charts.sh >> logs/dashboard_update.log 2>&1

Apps Script Trigger (rebuild charts daily at 3 AM):
   ‚Ä¢ Extensions ‚Üí Apps Script
   ‚Ä¢ Run: installDailyChartRebuild() (run once to set up trigger)

‚ö†Ô∏è KNOWN ISSUES:

1. BM Costs Data:
   - bmrs_costs table has no data since Oct 31, 2024
   - Script runs successfully but produces 0 rows
   - Chart will be empty until data is available

2. Outages Schema:
   - update_outages.py works with bmrs_remit_unavailability
   - Alternative table bmrs_uou2t3yw has eventStatus not eventStart
   - Current script working, no changes needed

3. Wind Forecast Data:
   - Only actual wind generation available
   - Forecast_MW column populated with 0
   - Chart shows actual wind only

üìÅ FILES CREATED:

Apps Script:
   /Users/georgemajor/GB-Power-Market-JJ/clasp_deploy/Charts.js
   /Users/georgemajor/GB-Power-Market-JJ/clasp_deploy/Code.js

Python Scripts:
   /Users/georgemajor/GB-Power-Market-JJ/update_wind_data.py
   /Users/georgemajor/GB-Power-Market-JJ/update_frequency.py
   /Users/georgemajor/GB-Power-Market-JJ/update_bm_costs.py
   /Users/georgemajor/GB-Power-Market-JJ/update_all_charts.sh

üñ•Ô∏è SERVER MIGRATION COMPLETE:

Dell Server (george@dell):
   Location: /home/george/GB-Power-Market-JJ
   ‚úÖ All dashboard update scripts
   ‚úÖ Chart data pipelines (every 5 min)
   ‚úÖ Outages updates (every 10 min)
   ‚úÖ Comprehensive dashboard (every 15 min)
   ‚úÖ Cron jobs installed and running

UpCloud Server (root@upcloud):
   Location: /opt/dashboard-api
   ‚úÖ dashboard-api.service (ChatGPT webhook only)
   ‚úÖ Systemd service running
   ‚ö†Ô∏è All cron jobs removed (moved to Dell)

‚úÖ DEPLOYMENT STATUS: COMPLETE

All core functionality deployed and tested!
Migration from UpCloud to Dell complete - ChatGPT webhook remains on UpCloud.
